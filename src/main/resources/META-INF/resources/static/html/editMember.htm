<div class="panel-heading"><span class="lead">Member Form</span></div>
<div class="formcontainer">
    <form ng-submit="ctrl.submit()" name="myForm" class="form-horizontal">
        <input type="hidden" ng-model="ctrl.member.id" />
        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-2 control-lable" for="fname">First Name</label>
                <div class="col-md-7">
                    <input type="text" ng-model="ctrl.member.firstName" id="fname" name="fname" class="validated form-control input-sm" placeholder="Enter Member First name" required ng-minlength="1"/>
                    <div class="has-error" ng-show="myForm.$dirty">
                        <span ng-show="myForm.fname.$error.required">This is a required field</span>
                        <span ng-show="myForm.fname.$error.minlength">Minimum length required is 3</span>
                        <span ng-show="myForm.fname.$invalid">This field is invalid</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-2 control-lable" for="lname">Last Name</label>
                <div class="col-md-7">
                    <input type="text" ng-model="ctrl.member.lastName" id="lname" name="lname" class="validated form-control input-sm" placeholder="Enter Member Last Name" required ng-minlength="1"/>
                    <div class="has-error" ng-show="myForm.$dirty">
                        <span ng-show="myForm.lname.$error.required">This is a required field</span>
                        <span ng-show="myForm.lname.$error.minlength">Minimum length required is 1</span>
                        <span ng-show="myForm.lname.$invalid">This field is invalid </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-2 control-lable" for="email">Email</label>
                <div class="col-md-7">
                    <input type="email" ng-model="ctrl.member.email" id="email" name="email" class="email form-control input-sm" placeholder="Enter Member Email" />
                    <!--<div class="has-error" ng-show="myForm.$dirty">-->
                        <!--<span ng-show="myForm.email.$invalid">This field is invalid </span>-->
                    <!--</div>-->
                </div>
            </div>
        </div>

        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-2 control-lable" for="phone">Phone</label>
                <div class="col-md-7">
                    <input type="text" ng-model="ctrl.member.phone" id="phone" name="phone" class="validated form-control input-sm" placeholder="Enter Member Phone"/>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-2 control-lable" for="address">Address</label>
                <div class="col-md-7">
                    <input type="text" ng-model="ctrl.member.address" id="address" name="address" class="validated form-control input-sm" placeholder="Enter Member Address" required/>
                    <div class="has-error" ng-show="myForm.$dirty">
                        <span ng-show="myForm.address.$error.required">This is a required field</span>
                        <span ng-show="myForm.address.$invalid">This field is invalid </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-2 control-lable" for="postcode">Postcode</label>
                <div class="col-md-7">
                    <input type="text" ng-model="ctrl.member.postcode" id="postcode" name="postcode" class="validated form-control input-sm" placeholder="Enter Member Post Code"/>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-2 control-lable" for="addDOB">Date of Birth</label>
                <div class="col-md-7">
                    <input type="text" ng-model="ctrl.member.dob" id="addDOB" name="addDOB" class="validated form-control input-sm" placeholder="Choose Date of Birth"/>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-2 control-lable" for="status">Status</label>
                <div class="col-md-7">
                    <select name="status" id="status" class="validated form-control input-sm" ng-model="ctrl.member.status" required>
                        <option value="">---Select---</option>
                        <option value="REGISTERED">Registered</option>
                        <option value="ACTIVE">Active</option>
                        <option value="INACTIVE">Inactive</option>
                    </select>
                    <div class="has-error" ng-show="myForm.$dirty">
                        <span ng-show="myForm.postcode.$error.required">This is a required field</span>
                        <span ng-show="myForm.postcode.$invalid">This field is invalid </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="form-actions floatRight">
                <button type="button" id="addPaymentButton" ng-click="ctrl.showAddPaymentDialog()" class="btn btn-primary btn-sm">Add Payment</button>
                <button type="button" ng-click="ctrl.back()" class="btn btn-primary btn-sm">Back</button>
                <input type="submit"  value="{{!ctrl.member.id ? 'Add' : 'Update'}}" class="btn btn-primary btn-sm" ng-disabled="myForm.$invalid">
                <button type="button" ng-click="ctrl.reset()" class="btn btn-warning btn-sm" ng-disabled="myForm.$pristine">Reset Form</button>
            </div>
        </div>

    </form>
</div>
<div class="panel-heading">
    <span class="lead">Payments</span>
</div>
<div class="tablecontainer">
    <table class="table table-hover">
        <thead>
        <tr>
            <th>Purchase Date</th>
            <th>Start Date</th>
            <th>Expire Date</th>
            <th>Amount (£)</th>
            <th>Point of Sale</th>
            <th>Transaction ID</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="p in ctrl.member.payments">
            <td><span ng-bind="p.purchaseDate"></span></td>
            <td><span ng-bind="p.startDate"></span></td>
            <td><span ng-bind="p.expireDate"></span></td>
            <td><span ng-bind="p.amount"></span></td>
            <td><span ng-bind="p.pointOfSale"></span></td>
            <td><span ng-bind="p.exTransactionId"></span></td>
        </tr>
        </tbody>
    </table>
</div>

<div id="payment-modal" class="ui-widget" title="Add Payment" style="display:none;">
    <form class="form-horizontal" role="form">
        <div class="form-group">
            <label for="addPurchaseDate" class="col-sm-2 control-label">Purchase Date</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="addPurchaseDate" ng-model="ctrl.payment.purchaseDate">
            </div>
        </div>
        <div class="form-group">
            <label for="addStartDate" class="col-sm-2 control-label">Start Date</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="addStartDate" ng-model="ctrl.payment.startDate">
            </div>
        </div>
        <div class="form-group">
            <label for="addExpireDate" class="col-sm-2 control-label">Expire Date</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="addExpireDate" ng-model="ctrl.payment.expireDate">
            </div>
        </div>
        <div class="form-group">
            <label for="addAmount" class="col-sm-2 control-label">Amount (£)</label>
            <div class="col-sm-10">
                <input type="number" value="20" class="form-control" id="addAmount" ng-model="ctrl.payment.amount">
            </div>
        </div>
        <div class="form-group">
            <label for="addPOS" class="col-sm-2 control-label">POS</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="addPOS" ng-model="ctrl.payment.pointOfSale">
            </div>
        </div>
        <div class="form-group">
            <label for="addTransID" class="col-sm-2 control-label">Transaction ID</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="addTransID" ng-model="ctrl.payment.exTransactionId">
            </div>
        </div>
        <input type="submit" tabindex="-1" style="position:absolute; top:-1000px">
    </form>
</div>
